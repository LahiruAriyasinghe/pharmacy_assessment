/*! For license information please see product.js.LICENSE.txt */
!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=21)}({21:function(t,e,n){t.exports=n("ZJSy")},ZJSy:function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t){var e={};function o(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===n(t)&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(r,i,function(e){return t[e]}.bind(null,i));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/",o(o.s=21)}({"./resources/js/invoices/product.js":function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t){var e={};function o(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===n(t)&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(r,i,function(e){return t[e]}.bind(null,i));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/",o(o.s=21)}({"./resources/js/invoices/product.js":function(t,e){$(document).ready((function(){$('[data-toggle="tooltip"]').tooltip(),$("#product").select2({maximumSelectionLength:5}),$("#product_stock").select2({maximumSelectionLength:5}),IMask(document.getElementById("lab_contact"),{mask:"000 000 0000"}),IMask(document.getElementById("lab_age"),{mask:Number,scale:0,signed:!1,min:0,max:150}),IMask(document.getElementById("lab_hospital_fee"),{mask:Number,scale:2,signed:!1,thousandsSeparator:"",radix:".",padFractionalZeros:!0,min:0,max:1e6}),IMask(document.getElementById("lab_number"),{mask:Number,scale:0,signed:!1,thousandsSeparator:"",radix:".",padFractionalZeros:!1,min:0,max:9999999999}),n.resetForm(),$("#lab_patient_form").trigger("reset"),$("#product_invoice_form").trigger("reset"),$("#lab_number_search_btn_inactive").hide(),$("#lab_number_search_btn_active").show()})),jQuery.validator.setDefaults({errorElement:"div",errorPlacement:function(t,e){t.addClass("invalid-feedback"),e.closest("div").append(t)},highlight:function(t,e,n){$(t).addClass("is-invalid")},unhighlight:function(t,e,n){$(t).removeClass("is-invalid")}});var n=$("#product_invoice_form").validate({ignore:"#quantity",submitHandler:function(){var t;t=$("#product_invoice_form"),r(!0),$.ajax({type:"POST",url:t.attr("action"),data:t.serialize(),success:function(t){r(!1),"success"in t?Swal.fire({text:"Transaction Completed",icon:"success",showCancelButton:!0,reverseButtons:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#6c757d",confirmButtonText:"Print invoice",cancelButtonText:"Close"}).then((function(e){e.value&&window.open(t.data.invoice_pdf_url),o()})):Swal.fire({icon:"error",title:"Oops...",text:"Something went wrong!"})},error:function(t,e,n){r(!1),Swal.fire({icon:"error",title:"Oops...",text:"Something went wrong!"})}})},rules:{"name[]":{required:!0}},messages:{"name[]":{required:"You should add at least a one product."}},errorPlacement:function(t,e){t.text(),Swal.fire({icon:"error",title:"Oops...",text:"Something went wrong!"})}});function o(){total=0,transactions=[],price=[],quantities=[],product_name=[],invoice=[],$("#name").val([]),$("#productTable").DataTable().clear().draw(),$("#product_total_val").html("0.00"),$("#product_total").val(0),$("#product_stock").empty(),$("#product_stock").append($("<option></option>").val(null).html("")),$.each(productStocks,(function(t,e){$("#product_stock").append($("<option></option>").val(e.id).html(e.batch_no))})),$("#product").empty(),$("#product").append($("<option></option>").val(null).html("")),$.each(products,(function(t,e){$("#product").append($("<option></option>").val(e.id).html(e.name))})),$("#uom").removeAttr("value"),$("#quantity").val(null),$("#price").val(null),$("#select_product").hide(),$("#select_stock").hide(),$("#quantity_zero").hide(),$("#quantity_min").hide(),$("#add_product_error").hide()}function r(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];$("#product_paid_btn").attr("disabled",t)}$("#quantity").change((function(){var t=$("#quantity").val();""==t?($("#quantity_zero").show(),$("#quantity_min").hide()):($("#quantity_zero").hide(),t<=0&&$("#quantity_min").show())})),$("#product").change((function(){var t=$("#product").val();null!=$("#product_stock").val()&&$("#select_stock").hide(),""==t?$("#select_product").show():$("#select_product").hide()})),$("#product_stock").change((function(){var t=$("#product_stock").val();""!=$("#product").val()&&$("#select_product").hide(),null==t?$("#select_stock").show():$("#select_stock").hide()})),$("#add_product").click((function(t){if(o=$("#quantity").val(),r=$("#product").val(),i=$("#product_stock").val(),a=!0,""==o?($("#quantity_zero").show(),$("#quantity_min").hide(),a=!1):($("#quantity_zero").hide(),o<=0&&($("#quantity_min").show(),a=!1)),""==r?($("#select_product").show(),a=!1):$("#select_product").hide(),null==i?($("#select_stock").show(),a=!1):$("#select_stock").hide(),a){total+=$("#price").val()*$("#quantity").val(),final=total.toFixed(2);var e=final.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");$("#product_total_val").html(e),$("#product_total").val(final);var n=new Object;n.name=$("#product option:selected").text(),n.quantity=$("#quantity").val(),n.price=$("#price").val()*$("#quantity").val(),transactions.push(n),item={},item.name=$("#product option:selected").text(),item.price=$("#price").val()*$("#quantity").val(),item.quantity=parseFloat($("#quantity").val()),invoice.push(item),$("#add_product_error").hide(),$("#productTable").DataTable().row.add([$("#product option:selected").text(),parseFloat($("#quantity").val()),$("#price").val()*$("#quantity").val(),'<a type="button" class="btn btn-danger delete-btn" id="delete"\n                              >Delete</a>']).draw(!1),price.push($("#price").val()*$("#quantity").val()),quantities.push($("#quantity").val()),product_name.push($("#product option:selected").text()),$("#amount").val(price),$("#units").val(quantities),$("#name").val(JSON.stringify(invoice)),$("#product_stock").empty(),$("#product_stock").append($("<option></option>").val(null).html("")),$.each(productStocks,(function(t,e){$("#product_stock").append($("<option></option>").val(e.id).html(e.batch_no))})),$("#product").empty(),$("#product").append($("<option></option>").val(null).html("")),$.each(products,(function(t,e){$("#product").append($("<option></option>").val(e.id).html(e.name))})),$("#uom").removeAttr("value"),$("#quantity").val(null),$("#price").val(null),$("#select_product").hide(),$("#select_stock").hide(),$("#quantity_zero").hide(),$("#quantity_min").hide(),$("#add_product_error").hide()}var o,r,i,a})),$("#lab_patient_form").validate({submitHandler:function(){!function(){var t=$("#lab_number").val(),e=$("#lab_patient_form").attr("action").replace("xx",t);if(""==t.trim())return;$("#lab_number_search_btn_active").hide(),$("#lab_number_search_btn_inactive").show(),$.ajax({type:"GET",url:e,data:null,success:function(t){$("#lab_number_search_btn_inactive").hide(),$("#lab_number_search_btn_active").show(),"success"in t?updatePatientDetails(t.data.patient):Swal.fire({icon:"question",title:"Cannot find the patient",text:"Please recheck the patient number from receipt or create new patient.",showConfirmButton:!1,timer:2e3})},error:function(t,e,n){$("#lab_number_search_btn_inactive").hide(),$("#lab_number_search_btn_active").show(),Swal.fire({icon:"question",title:"Cannot find the patient",text:"Please recheck the patient number from receipt or create new patient.",showConfirmButton:!1,timer:2e3})}})}()},rules:{number:{minlength:10,maxlength:10,number:!0}}}),$("#lab_clear_info_btn").click((function(t){t.preventDefault(),clearPatientDetails()})),$("#pharmacy_cancel_btn").click((function(t){t.preventDefault(),o()})),$("#lab_number").keyup((function(t){13==t.keyCode&&$("#lab_patient_form").submit()}))},21:function(t,e,n){t.exports=n("./resources/js/invoices/product.js")}})},21:function(t,e,n){t.exports=n("./resources/js/invoices/product.js")}})}});